<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE article PUBLIC 
  "-//OASIS//DTD DocBook XML V4.4//EN"
  "http://www.docbook.org/xml/4.4/docbookx.dtd"
>

<article lang="en" revision="draft" class="whitepaper">
  <title>KIWI Quick Start</title>
  <articleinfo>
    <authorgroup>
      <author>
        <firstname>Marcus</firstname>
        <surname>Schäfer</surname>
        <contrib>Developer</contrib>
      </author>
      <author>
        <firstname>Thomas</firstname>
        <surname>Schraitle</surname>
        <contrib>Dokumentation</contrib>
      </author>
    </authorgroup>
    <keywordset>
      <keyword>KIWI</keyword>
      <keyword>KIWI Image System</keyword>
      <keyword>config.xml</keyword>
      <keyword>Live DVD</keyword>
      <keyword>Live CD</keyword>
    </keywordset>    
    <pubdate>Created: <?dbtimestamp?></pubdate>
    <releaseinfo>$Id$</releaseinfo>
  </articleinfo>
  
  <sect1 id="sec.kiwi.whatis" os="sles10">
    <title>What is KIWI?</title>
    <para>KIWI is a system for creating ISO images to boot as Live DVD,
      Live USB, or as an image for virtualization systems like Xen, Qemu or
      Vmware. KIWI provides the following advantages:
    </para>
    <remark>FIXME: Add more advantages.</remark>
    <itemizedlist>
      <listitem>
        <para>Create your own Live CD/DVD which contains only those
          packages that you really need.
        </para>
      </listitem>
      <listitem>
        <para>Debug a new distribution by creating all necessary
          packages.</para>
      </listitem>
      <listitem>
        <para>Build your own installable ISO images to customize
          available packages, patterns, services, etc.</para>
      </listitem>
      <listitem>
        <para>Test new hardware with a predefinied image.</para>
      </listitem>
      <listitem>
        <remark>man kann mit kiwi images bauen die eigene nicht
          distributierte software enthalten</remark>
        <para>Create KIWI images which contains software that is
          not included in the official distribution.</para>
      </listitem>
      <listitem>
        <remark>man kann mit kiwi images bauen die direkt in
          Virtualisierungssystemen wie zB VMware oder Xen benutzt werden
          können. KIWI generiert auch die dafür notwendige guest
          Konfigurationsdatei</remark>
        <para>Build KIWI image that can be directly used by
          virtualisation systems like Xen or VMware.</para>
      </listitem>
      <listitem>
        <remark>man kann mit einer kiwi image Beschreibung leicht auf
          eine andere Architektur wechseln indem man das image mit einer
          für die Architektur angepasstes repo baut</remark>
        <para>Generate KIWI images for different processor architectures
          only by switching to a different repository.</para>
      </listitem>
      <listitem>
        <remark>man kann mit kiwi kleinere images bauen als es mit einer
          normalen Installation möglich ist. Bedingt durch mögliche
          Kompression und Einflussnahme ausserhalb des
        Paketmanagers.</remark>
        <para>Create smaller images than with a normal installation.</para>
      </listitem>
      <listitem>
        <remark>man kann mit kiwi images für Netzwerk Systeme erstellen. kiwi
          unterstützt einen auch im Aufbau der Infrastruktur (PXE)</remark>
        <para>Build images for network systems. KIWI supports you by
          establishing the infrastrucutre, for example PXE.</para>
      </listitem>
    </itemizedlist>    
  </sect1>
  
  <sect1 id="sec.kiwi.preparation" os="sled10">
    <title>What do I need?</title>
    <para>To build images with KIWI, you need the following
    preconditions:</para>
    <remark>FIXME: Add more preconditions?</remark>
    <orderedlist>
      <listitem>
        <para>A minimum of <remark>Y</remark> Gigabyte of free space.</para>
      </listitem>
      <listitem>
        <para>KIWI is split into several packages, targeted to different
        image types. In every case you need the base package,
          <package>kiwi</package>. Depending on your target image, you need the
        following additional packages:</para>
        
        <informaltable>
          <tgroup cols="2">
            <tbody>
              <row>
                <entry>Installation media</entry>
                <entry><package>kiwi-desc-oemboot</package>, 
                  <package>kiwi-desc-vmxboot</package></entry>
              </row>
              <row>
                <entry>Virtualization</entry>
                <entry><package>kiwi-desc-vmxboot</package>, 
                  <package>kiwi-desc-xenboot</package></entry>
              </row>
              <row>
                <entry>USB sticks</entry>
                <entry><package>kiwi-desc-usbboot</package></entry>
              </row>
              <row>
                <entry>Network client</entry>
                <entry><package>kiwi-desc-netboot</package></entry>
              </row>
            </tbody>
          </tgroup>          
        </informaltable>
      </listitem>
      <listitem>
        <para>Recommended distribution is openSUSE 10.3</para>
      </listitem>
    </orderedlist>
        
  </sect1>
  
  <sect1 id="sec.kiwi.process">
    <title>Knowing KIWI's Build Process</title>
    <para>The building process of KIWI is separated into three steps:</para>
    <orderedlist>
      <listitem>
        <formalpara>
          <title>Physical Extend</title>
          <para>This stage prepares the content of your new filesystem.
            During this stage, you determine which packages are
            installed on your image and which configuration fiels are
            included.</para>
        </formalpara>        
      </listitem>
      <listitem>
        <formalpara>
          <title>Logical Extend</title>
          <para>This stage creates the operating system image based on
            the the first step.</para>
        </formalpara>        
      </listitem>
      <listitem>
        <formalpara>
          <title>Deployment</title>
          <para>The resulting ISO image can be deployed with different
            methods like installed on a harddisc or played by a
            virtualization system (Vmware, Qemu, VirtualBox).</para>
        </formalpara>        
      </listitem>
    </orderedlist>
    <para>Detailed background can be found in the 
      <citetitle>System Design</citetitle> paper, 
      see <filename>/usr/share/doc/packages/kiwi/kiwi.pdf</filename>.
      </para>
  </sect1>
  
  <sect1 id="sec.kiwi.livecd">
    <title>Creating a Graphical Live ISO CD</title>
    <para>The KIWI package contains two example files which create
    different images:</para>
    
    <variablelist>
      <varlistentry>
        <term><filename>/usr/share/doc/packages/kiwi/examples/test1</filename></term>
        <listitem>
          <para>Is an openSUSE 10.3 KDE system, based on patterns.</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term><filename>/usr/share/doc/packages/kiwi/examples/test2</filename></term>
        <listitem>
          <para>This is an openSUSE 10.3 console system, based on a
            package list.</para>
        </listitem>
      </varlistentry>
    </variablelist>
    
    <para>Both examples have the users <systemitem
      class="username">root</systemitem> and <systemitem 
        class="username">linux</systemitem> both with the password
      <literal>linux</literal>.
    </para>
    <para>To create an ISO image, proceed as follows:</para>
    
    <procedure>
      <step>
        <para>Install the package <package>kiwi</package> and resolve
          any dependencies.
        </para>
      </step>
      <step>
        <para>Open a shell and become root.</para>
      </step>
      <step>
        <para>Run KIWI with the following command to prepare the first
          phase (<quote>physical extend</quote>):</para>
        <screen><command
>kiwi</command> --prepare /usr/share/doc/packages/kiwi/examples/test1 \
    --root /tmp/kiwi-test1</screen>
        <para>If everything is correct, you see the message
            <errortext>KIWI exited sucessfully</errortext>.</para>       
      </step>
      <step>
        <para>Build the ISO image:</para>
        <screen><command
>kiwi</command> --create /tmp/kiwi-test1 -d /tmp --type iso</screen>
        <para>KIWI builds the ISO image. If everything is correct, it print
          the message <errortext>KIWI exited sucessfully</errortext>.</para>
      </step>
      <step>
        <para>Test the ISO image with Qemu, Vmware or VirtualBox.</para>
      </step>
    </procedure>    
  </sect1>
   
</article>
