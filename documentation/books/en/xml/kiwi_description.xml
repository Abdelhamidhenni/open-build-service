<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.4//EN"
  "http://www.docbook.org/xml/4.4/docbookx.dtd"
[
 <!ENTITY % entities SYSTEM "entity-decl.ent">
 %entities;
]>

<!--
 ***************************************************
 Please see license.xml for this document's license.
 ***************************************************
-->

<sect1 id="sec.kiwi.description" xml:base="kiwi_description.xml">
 <title>The KIWI Image Description</title>
 <para> An image description tree is used to create an operating system image from a physical
  extend. It contains the set of files required to generate an image, and is arranged in the
  following order: </para>
 <screen> |
 |- config.xml
 |- config [optional]
 |   |- package configuration scripts
 |
 |- cdboot [optional] 
 |   |- isolinux.cfg
 |   |- isolinux.msg
 |   |- isolinux.sh -> ../../suse-isolinux
 |
 |- config.sh [optional]
 |- images.sh [optional]
 |- config-yast.xml [optional]
 |- config-cdroot.tgz [optional]
 |- root [optional]
     |- root tree files/directories</screen>
 <sect2 id="sec.kiwi.description.config.xml">
  <title>
   <filename>config.xml</filename>
  </title>
  <para>
   <filename>config.xml</filename> is the main configuration file used to define the image type,
   base name, repositories, profiles, options, and the package/pattern list.</para>
  <para> All values entered in the <option>image</option>, <option>preferences</option>, and
    <option>drivers</option> elements of the <filename>config.xml</filename> file are also stored in
   a file called <filename>.profile</filename>. This file is created before the execution of an
   image script such as <filename>config.sh</filename> or <filename>images.sh</filename>, or a
    <quote>package script.</quote> This means that the <filename>config.xml</filename> file
   parameters are available as variables that can be sourced via script. This kind of script should
   follow this template (replace <replaceable>name</replaceable> with the actual image name): </para>
  <screen>#!/bin/sh
test -f /.kconfig &amp;&amp; . /.kconfig test -f /.profile
test -f /.profile &amp;&amp; . /.profile test -f /.profile
echo "Configure image: [$name]..."
...
exit 0</screen>
  <para> This kind of script is called within the image environment, which means that is not
   possible to damage the host system with this script even if you are using absolute paths. </para>
  <para>The following is a sample <filename>config.xml</filename> file:</para>
  <screen>&lt;image name="Name" inherit="optional path" schemeversion="1.4"&gt;<co id="co.kiwi.config.image"/>
  &lt;description type="boot|system"&gt;<co id="co.kiwi.config.description"/>
    &lt;author&gt;<replaceable>Author</replaceable>&lt;/author&gt;
    &lt;contact&gt;<replaceable>Contact</replaceable>&lt;/contact&gt;
    &lt;specification&gt;<replaceable>Specification</replaceable>&lt;/specification&gt;
  &lt;/description&gt;
  &lt;preferences&gt;<co id="co.kiwi.config.preferences"/>
    &lt;type primary="true" boot="..." filesystem="..." flags="..."
          bootprofile="...">Type&lt;/type>
    &lt;version&gt;<replaceable>Version</replaceable>&lt;/version&gt;
    &lt;size unit="<replaceable>Unit</replaceable>"&gt;<replaceable>Size</replaceable>&lt;/size&gt;
    &lt;packagemanager&gt;<replaceable>Name</replaceable>&lt;/packagemanager&gt;
    &lt;rpm-check-signatures&gt;True|False&lt;/rpm-check-signatures&gt;
    &lt;rpm-force&gt;True|False&lt;/rpm-force&gt;
    &lt;keytable&gt;<replaceable>Name</replaceable>&lt;/keytable&gt;
    &lt;timezone&gt;<replaceable>Name</replaceable>&lt;/timezone&gt;
    &lt;locale&gt;<replaceable>Name</replaceable>&lt;/locale&gt;
    &lt;defaultdestination&gt;<replaceable>Path</replaceable>&lt;/defaultdestination&gt;
    &lt;defaultroot&gt;<replaceable>Path</replaceable>&lt;/defaultroot&gt;
    &lt;compressed&gt;Yes|No&lt;/compressed&gt;
  &lt;/preferences&gt;
  &lt;profiles&gt;<co id="co.kiwi.config.profiles"/>
    &lt;profile name="<replaceable>Name</replaceable>"
          description="<replaceable>Description</replaceable>"/&gt;
  &lt;/profiles&gt;
  &lt;users group="<replaceable>Groupname</replaceable>"&gt;<co id="co.kiwi.config.users"/>
    &lt;user name="<replaceable>User</replaceable>" 
          pwd="<replaceable>Password</replaceable>" home="<replaceable>Homedirectory</replaceable>"/&gt;
  &lt;/users&gt;
  &lt;drivers type="<replaceable>Type</replaceable>"
    profiles="<replaceable>Name</replaceable>"&gt;<co id="co.kiwi.config.drivers"/>
    &lt;file name="<replaceable>Filename</replaceable>"/&gt;
  &lt;/drivers&gt;
  &lt;repository type="<replaceable>Type</replaceable>"&gt;<co id="co.kiwi.config.repository"/>
    &lt;source path="<replaceable>Url</replaceable>"/&gt;
  &lt;/repository&gt;
  &lt;/deploy server="<replaceable>IP address</replaceable>"
    blocksize="<replaceable>Size</replaceable>"&gt;<co id="co.kiwi.config.deploy"/>
    &lt;partitions device="<replaceable>Devicename</replaceable>"&gt;
      &lt;partition type="<replaceable>Type</replaceable>" 
          number="<replaceable>Number</replaceable>" size="<replaceable>Size</replaceable>"/&gt;
    &lt;/partitions&gt;
    &lt;union rw="<replaceable>RW-Device</replaceable>" ro="<replaceable>RO-Device</replaceable>" type="aufs|unionfs"/&gt;
    &lt;configuration source="<replaceable>Source</replaceable>" 
          dest="<replaceable>Destination</replaceable>"/&gt;
  &lt;/deploy&gt;
  &lt;packages type="<replaceable>Type</replaceable>"
          patternType="onlyRequired|plusSuggested|plusRecommended" 
          patternPackageType="onlyRequired|plusSuggested|plusRecommended" 
          profiles="<replaceable>Name</replaceable>"&gt;<co id="co.kiwi.config.packages"/>
    &lt;package name="<replaceable>Packagename</replaceable>" 
          arch="<replaceable>Arch</replaceable>"/&gt;
    &lt;opensusePattern name="<replaceable>Patternname</replaceable>"/&gt;
    &lt;ignore name="<replaceable>Packagename</replaceable>"/&gt;
  &lt;/packages&gt;
&lt;/image&gt;
</screen>
  <calloutlist>
   <callout arearefs="co.kiwi.config.image">
    <para> The <option>image</option> element contains the <option>name</option> attribute, which
     specifies the base name of the image. The version number and current date are added
     automatically, with the version number extracted from the directory in which the description
     files for this image are located. The <option>inherit</option> attribute is optional, and if
     you specify a path to another KIWI description, this description is prepended to the current
     description. The <option>schemeversion</option> attribute is mandatory, and allows only version
     &lt;emphasis>1.4&lt;/emphasis> at the moment. </para>
   </callout>
   <callout arearefs="co.kiwi.config.description">
    <para> The <option>description</option> element contains the <option>author</option>,
      <option>contact</option>, and <option>specification</option> attributes.
     <option>Author</option> is the name of the person responsible for this image.
     <option>Contact</option> is a valid e-mail address for the responsible person.
      <option>Specification</option> is a description of the image. </para>
   </callout>
   <callout arearefs="co.kiwi.config.preferences">
    <para>The <option>preferences</option> element contains the following information needed to
     create the logical extend:</para>
    <variablelist>
     <varlistentry id="bc15pm7">
      <term>type</term>
      <listitem>
       <para>The image type of the logical extend. When specifying multiple entries, the additional
        attribute <option>primary</option>, which specifies the primary type, must be filled in, or
        the first entry of the <option>type</option> value is used.</para>
       <para> The following values are valid for <option>type</option>:</para>
       <orderedlist spacing="normal">
        <listitem>
         <para>ext2, ext3, reiserfs, squashfs, cpio</para>
        </listitem>
        <listitem>
         <para>iso, split, usb, vmx, xen, pxe</para>
        </listitem>
       </orderedlist>
       <para>The second group of types requires additional attributes:</para>
       <itemizedlist mark="bullet" spacing="normal">
        <listitem>
         <formalpara id="bc1je30">
          <title>primary:</title>
          <para>Specifies the primary type. The <systemitem>KIWI</systemitem> option
           <option>--type</option> lets you choose the type.</para>
         </formalpara>
        </listitem>
        <listitem>
         <formalpara id="bc1jel5">
          <title>boot:</title>
          <para>Specifies the boot image (<filename>initrd</filename>) which should be used and
           created for this system image description. The boot images for KIWI are stored in
            <filename>/usr/share/kiwi/image</filename>, and are grouped by function into the
           following directories: <filename>isoboot</filename>, <filename>netboot</filename>,
            <filename>usbboot</filename>, <filename>vmxboot</filename>, and
           <filename>enboot</filename>. The attribute value is the path relative to
            <filename>/usr/share/kiwi/image</filename>.</para>
         </formalpara>
        </listitem>
        <listitem>
         <formalpara id="bc1jezy">
          <title>flags:</title>
          <para>Specifies flags for the image type. Currently, the only available flag is
            <option>compressed</option> for the <literal>iso</literal> type. This flag causes live
           media to be based on a squashfs compressed file system.</para>
         </formalpara>
        </listitem>
        <listitem>
         <formalpara id="bc1jezz">
          <title>filesystem:</title>
          <para>Specifies the filesystem, which can be any of the following:<option>ext2</option>,
            <option>ext3</option>, <option>reiserfs</option>, <option>squashfs</option>, or
            <option>cpio</option>.</para>
         </formalpara>
        </listitem>
        <listitem>
         <formalpara id="bc1jf00">
          <title>bootprofile:</title>
          <para>Specifies an addon boot profile. In <filename>config.xml</filename>, you can bind
           specific packages/drivers into a namespace. This is called a profile. The information in
           a profile is used if the <systemitem>KIWI</systemitem> option
           <option>--add-profile</option> is used, or if the profile name is included as a value in
           the <option>bootprofile</option> attribute. This feature is used with the netboot image
           to distinguish between different kernels (for example, between the default kernel and the
           Xen kernel).</para>
         </formalpara>
        </listitem>
       </itemizedlist>
       <para> The following is a list of boot image (<filename>initrd</filename>) types. KIWI
        automatically creates the specified <emphasis>...boot</emphasis> boot image during the
        creation of the system image. The description for the boot image must exist in
         <filename>/usr/share/kiwi/image/...boot/suse-...</filename></para>
       <itemizedlist mark="bullet" spacing="normal">
        <listitem>
         <formalpara id="bc1jl6p">
          <title>&lt;type boot="isoboot/suse-..." flags="unified">iso&lt;/type>:</title>
          <para>If the optional <option>flags</option> attribute is set to
           <option>compressed</option>, squashfs compression is used for the read-only portion of
           the ISO image. If flags is set to <option>unified</option>, the squashfs compressed
           read-only portion is used in combination with the union filesystem named
           <option>aufs</option>, which allows for a complete read-write system as long as the
           system runs.</para>
         </formalpara>
        </listitem>
        <listitem>
         <formalpara id="bc1jlbk">
          <title>&lt;type boot="usbboot/suse-..." filesystem="ext3">usb&lt;/type>:</title>
          <para>The <option>filesystem</option> attribute can be set to any of the following:
            <option>ext2</option>, <option>ext3</option>, <option>squashfs</option>, or
            <option>reiserfs</option>. The created system and boot images are suitable to run on a
           USB stick, using the KIWI <option>--bootstick / --bootstick-system</option>
          options.</para>
         </formalpara>
        </listitem>
        <listitem>
         <formalpara id="bc1jlbl">
          <title>&lt;type boot="vmxboot/suse-..." filesystem="ext3" format="...">vmx&lt;/type>:</title>
          <para>The <option>filesystem</option> attribute can be set to any of the following:
            <option>ext2</option>, <option>ext3</option>, or <option>reiserfs</option>. The final
           result is one file appearing as a virtual disk, including the system and boot images, the
           disk geometry partition information, and the boot manager. The <option>format</option>
           attribute can be set to any of the following: <option>vvfat</option>,
           <option>vpc</option>, <option>bochs</option>, <option>dmg</option>,
           <option>cloop</option>, <option>vmdk</option>, <option>qcow</option>,
           <option>cow</option>, or <option>iso</option>. With the exception of the iso format,
           these are virtual disk formats supported by the QEMU disk tool qemu-convert. The iso
           format should be use only in combination with an <emphasis>oemboot</emphasis> boot image.
           Using this format generates an install CD/DVD from the created virtual disk image. To
           install the virtual disk system from a CD onto a real computer hard disk, you must use
           the oemboot boot image. The process creates a bootable ISO image, including the virtual
           disk image and the oemboot boot image. The oemboot image first installs the virtual disk
           image file onto the real hard disk using the <command>dd</command> command. Because the
           virtual hard disk contains a boot manager, the newly installed system can boot after the
           installation. The oemboot image then re-partitions the disk according to its real disk
           geometry, installs the distribution default initrd, and boots into the final
          system.</para>
         </formalpara>
        </listitem>
        <listitem>
         <formalpara id="bc1jlbn">
          <title>&lt;type boot="xenboot/suse-..." filesystem="ext3">xen&lt;/type>:</title>
          <para>The <option>filesystem</option> attribute can be set to any of the following:
            <option>ext2</option>, <option>ext3</option>, or <option>reiserfs</option>. The created
           system and boot images, as well as the xen configuration file, can be used to run a Xen
           virtual machine using the <filename>xm</filename> program.</para>
         </formalpara>
        </listitem>
        <listitem>
         <formalpara id="bc1jlbo">
          <title>&lt;type boot="netboot/suse-..." filesystem="ext3">pxe&lt;/type>:</title>
          <para> The <option>filesystem</option> attribute can be set to any of the following:
            <option>ext2</option>, <option>ext3</option>, or <option>reiserfs</option>. The value of
            <option>boot</option> attribute contains the path to a netboot boot image description.
           The created system and boot images are suitable to drive a network client station. An
           appropriate network infrastructure that includes a DHCP and TFTP server is required in
           order to activate a network client.</para>
         </formalpara>
        </listitem>
        <listitem>
         <formalpara id="bc1jo7q">
          <title>&lt;type boot="netboot/suse-..."
            filesystem="<replaceable>type-rw</replaceable>,<replaceable>type-ro</replaceable>">split&lt;/type>:</title>
          <para>The <option>filesystem</option> attribute specifies a filesystem pair in which
            <replaceable>type-rw</replaceable> specifies <option>ext2</option>,
           <option>ext3</option>, or <option>reiserfs</option>, and
           <replaceable>type-ro</replaceable> specifies <option>ext2</option>,
           <option>ext3</option>, <option>reiserfs</option>, <option>cramfs</option>, or
            <option>squashfs</option>. The ability to booting split images is supported only by the
           netboot boot images (which must be created with a separate KIWI run).</para>
         </formalpara>
        </listitem>
       </itemizedlist>
      </listitem>
     </varlistentry>
     <varlistentry id="bc15szd">
      <term>version</term>
      <listitem>
       <para> The three-part version number with the following format:</para>
       <para>
        <literal><replaceable>Major</replaceable>.<replaceable>Minor</replaceable>.<replaceable>Release</replaceable></literal>
       </para>
       <para> The following rules should be applied when incrementing the version number:</para>
       <itemizedlist mark="bullet" spacing="normal">
        <listitem>
         <para>Increment the <literal>Release</literal> number on minor modifications if no packages
          have been added or removed.</para>
        </listitem>
        <listitem>
         <para>Increment the <literal>Minor</literal> number and reset the
          <literal>Release</literal> number to <literal>0</literal> if packages have been added or
          removed.</para>
        </listitem>
        <listitem>
         <para>Increment the <literal>Major</literal> number if the size of the image
         changed.</para>
        </listitem>
       </itemizedlist>
      </listitem>
     </varlistentry>
     <varlistentry id="bc15t3a">
      <term>size</term>
      <listitem>
       <para> Specifies the size of an image with a numerical value in Megabytes or Gigabytes. Use
        the <option>unit</option> attribute to assign the unit <option>M</option> for Megabytes or
         <option>G</option> for Gigabytes.</para>
       <para>KIWI extends the image size automatically if the specified value is too small. If the
        actual size is more than 100MB larger than the specified size, KIWI aborts with an error
        message. KIWI does not automatically reduce the image size if the specified value is too
        large, because the extra space might be needed to, for example, run custom scripts. If no
        size is specified, KIWI uses the required size plus approximately 10% free space.</para>
      </listitem>
     </varlistentry>
     <varlistentry id="bc15t6s">
      <term>packagemanager</term>
      <listitem>
       <para>Specifies the packagemanager to be used for package installation. The default
        packagemanager is <option>smart</option>, but <option>zypper</option> is also
       supported.</para>
      </listitem>
     </varlistentry>
     <varlistentry id="bc15tcb">
      <term>compressed</term>
      <listitem>
       <para> Specifies whether the system image should be compressed or not. This affects only the
        KIWI output file itself and has no influence on the operating system contained in the image.
        For network clients, download the image as a compressed image.</para>
      </listitem>
     </varlistentry>
     <varlistentry id="bc15ttr">
      <term>keytable</term>
      <listitem>
       <para> Specifies the name of the console keymap to use. The value corresponds to a map file
        in <filename>/usr/share/kbd/keymaps</filename>. The <option>KEYTABLE</option> variable in
         <filename>/etc/sysconfig/keyboard</filename> file is set according to the keyboard
       mapping.</para>
      </listitem>
     </varlistentry>
     <varlistentry id="bc15tts">
      <term>timezone</term>
      <listitem>
       <para>Specifies the time zone. Available time zones are located in the
         <filename>/usr/share/zoneinfo</filename> directory. Specify the attribute value relative to
         <filename>/usr/share/zoneinfo</filename>. For example, specify
        <option>Europe/Berlin</option> for <filename>/usr/share/zoneinfo/Europe/Berlin</filename>.
        KIWI uses this value to configure the timezone in <filename>/etc/localtime</filename> for
        the image.</para>
      </listitem>
     </varlistentry>
     <varlistentry id="bc15ttt">
      <term>locale</term>
      <listitem>
       <para>Specifies the name of the locale to use, which defines the contents of the
         <option>RC_LANG</option> system environment variable in
        <filename>/etc/sysconfig/language</filename>.</para>
      </listitem>
     </varlistentry>
     <varlistentry id="bc15ttu">
      <term>defaultdestination</term>
      <listitem>
       <para>(Optional) Used if the <option>destdir</option> option is not specified when calling
        KIWI.</para>
      </listitem>
     </varlistentry>
     <varlistentry id="bc15ttv">
      <term>defaultroot</term>
      <listitem>
       <para>(Optional) Used used if the <option>root</option> option is not specified when calling
        KIWI.</para>
      </listitem>
     </varlistentry>
    </variablelist>
   </callout>
   <callout arearefs="co.kiwi.config.profiles">
    <para> The optional <option>profiles</option> element lets you maintain one image description
     while allowing for variation in the set of packages and drivers that are included. A separate
      <option>profile</option> element must be specified for each variation. The
     <option>profile</option> child element, which has <option>name</option> and
     <option>description</option> attributes, specifies an alias name used to mark sections as
     belonging to a profile, and a detailed description explaining what this profile does. To mark a
     set of packages or drivers as belonging to a profile, simply annotate them with the
      <option>profiles</option> attribute. If a <option>packages</option> tag does not have a
      <option>profiles</option> attribute, it is assumed to be present for all profiles. This
     information also applies to the <option>drivers</option> element.</para>
   </callout>
   <callout arearefs="co.kiwi.config.users">
    <para>The optional <option>users</option> element specifies the users to be added to the image.
     The <option>group</option> attribute specifies the group the users belong to. If this group
     does not exist, it is created. A <option>user</option> element must be specified for each
     group. The user child element specifies the users belonging to a group, and the
     <option>name</option>, <option>pwd</option>, and <option>home</option> attributes specify the
     username, password, and path to the home directory.</para>
   </callout>
   <callout arearefs="co.kiwi.config.drivers">
    <para> The optional <option>drivers</option> element contains driver file names. The names are
     interpreted as general driver names and used if they are contained in the kernel tree. The
      <option>type</option> attribute specifies one of the following driver types:</para>
    <variablelist>
     <varlistentry id="bc147ei">
      <term>
       <option>netdrivers</option>
      </term>
      <listitem>
       <para> Each file is specified relative to the <filename>
          /lib/modules/&lt;<replaceable>Version</replaceable>>/kernel/drivers/net</filename>
        directory.</para>
      </listitem>
     </varlistentry>
     <varlistentry id="bc148ps">
      <term>
       <option>usbdrivers</option>
      </term>
      <listitem>
       <para>Each file is specified relative to the
          <filename>/lib/modules/&lt;<replaceable>Version</replaceable>>/kernel/drivers/usb</filename>
        directory.</para>
      </listitem>
     </varlistentry>
     <varlistentry id="bc14960">
      <term>
       <option>drivers</option>
      </term>
      <listitem>
       <para> Each file is specified relative to the
          <filename>/lib/modules/&lt;<replaceable>Version</replaceable>>/kernel</filename>
        directory.</para>
      </listitem>
     </varlistentry>
    </variablelist>
   </callout>
   <callout arearefs="co.kiwi.config.repository">
    <para> The <option>repository</option> element specifies the source path and type used by the
     package manager. The <option>type</option> attribute specifies the type of the repository, for
     example, &lt;code>type="yast2"&lt;/code>. The <option>source</option> child element
     contains the <option>path</option> attribute, which specifies the location of the repository
     (for example, &lt;code>source="/image/CDs/full-i386"&lt;/code>). The path specification
     can be any of the following, and can include the %arch macro if needed:</para>
    <itemizedlist mark="bullet" spacing="normal">
     <listitem>
      <para>A local path starting with <filename>/</filename></para>
     </listitem>
     <listitem>
      <para><literal>this://</literal> relative path name, which is relative to the image
       description being referenced</para>
     </listitem>
     <listitem>
      <para><literal>http://</literal> or <literal>ftp://</literal> Network-Location</para>
     </listitem>
     <listitem>
      <para>opensuse://Project-Name</para>
     </listitem>
    </itemizedlist>
    <para>Multiple repository tags are allowed. For information on how to setup a smart source, see
      <ulink url="http://labix.org/smart"/>. </para>
   </callout>
   <callout arearefs="co.kiwi.config.deploy">
    <para>The <option>deploy</option> element is used only for network clients. It specifies the
     location of the system image, how the client disk should be partitioned, and the configuration
     files that should be included. The <option>server</option> and <option>blocksize</option>
     attributes specify the TFTP server which controls the download. The <option>partitions</option>
     tag specifies the partitions for one disk device (<option>device</option>). Each partition is
     specified by one <option>partition</option> subtag named which defines the type (see
      <command>sfdisk --list-type</command>), partition number, size, optional mountpoint, and
     optional information on if this partition is the system image target partition. </para>
    <para>With the KIWI netboot image, the first partition is always the swap partition, while the
     second partition is used, by default, for the system image. With the optional
     <option>target</option> flag, you can specify a partition other than the second partition to
     install the system image on. If <option>size</option> is set to "image," KIWI calculates the
     required size for this partition in order to have enough space for the later image. The
     optional <option>union</option> tag is used if the system image is based on a read-only
     filesystem such as squashfs. In this case, KIWI creates an additional write partition, then
     combines both partitions with the given overlay filesystem. Currently, there are two such
     filesystems: unionfs and aufs (aufs is the preferred file system). The partition that holds the
     read-only system image must be set as the <option>ro</option> attribute value, and the
     partition that serves as the write partition must be set the <option>rw</option> attribute
     value.</para>
    <para>The optional <option>configuration</option> tag can be used to integrate a network
     client's configuration files which are stored remotely on the server. The
     <option>source</option> attribute specifies the path on the server used by a TFTP client
     program to download the file, and the <option>dest</option> attribute specifies the target
     relative to the root (/) of the network client.</para>
   </callout>
   <callout arearefs="co.kiwi.config.packages">
    <para>The <option>packages</option> element specifies the list of packages and pattern names to
     be used with the image. There are five different types of package sets or patterns, specified
     with the <option>type</option> attribute:</para>
    <variablelist>
     <varlistentry id="image">
      <term>image</term>
      <listitem>
       <para> List of packages used to finish the image installation. All packages which make up the
        image are listed here.</para>
      </listitem>
     </varlistentry>
     <varlistentry id="boot">
      <term>boot</term>
      <listitem>
       <para>List of packages used to start creating a new operating system root tree. Basic
        components which are required to <command>chroot</command> into that system, such as
         <systemitem>glibc</systemitem>, are listed here.</para>
      </listitem>
     </varlistentry>
     <varlistentry id="xen1">
      <term>xen</term>
      <listitem>
       <para>List of packages used when the image needs support for Xen-based virtualization. The
         <option>memory</option> and <option>disk</option> attributes define how much memory the
        virtual system requires and the kind of device the disk should appear as in the virtual
        instance. This information is used to create the appropriate Xen configuration file.</para>
      </listitem>
     </varlistentry>
     <varlistentry id="vmware">
      <term>vmware</term>
      <listitem>
       <para>List of packages used when the image needs support for VMware-based virtualization. The
         <option>memory</option> and <option>disk</option> attributes define how much memory the
        virtual system requires and the kind of device the disk should appear as in the virtual
        instance. This information is used to create the appropriate VMware configuration
       file.</para>
      </listitem>
     </varlistentry>
     <varlistentry id="delete">
      <term>delete</term>
      <listitem>
       <para>List of packages stored for later deletion. The package names are available in the
         <option>$delete</option> variable of the <filename>.profile</filename> file created by
        KIWI. The <option>baseGetPackagesForDeletion()</option>function returns the contents of this
        environment variable, and can be used to delete the packages while ignoring requirements or
        dependencies.</para>
      </listitem>
     </varlistentry>
    </variablelist>
    <para>Using a pattern name enhances the package list with a number of additional packages
     belonging to this pattern. Support for patterns is SUSE-specific, and available with openSUSE
     10.2 or later. The optional <option>patternType</option> and
     <option>patternPackageType</option> attributes specify which pattern references or packages
     should be used in a given pattern. The value can be set to <emphasis>onlyRequired</emphasis>,
     which incorporates only patterns and packages that are required by the given pattern,
      <emphasis>plusSuggested</emphasis>, which incorporates patterns and packages that are required
     and suggested by the given pattern, or <emphasis>plusRecommended,</emphasis> which incorporates
     patterns and packages that are required and recommended by the given pattern. By default, only
     required patterns and packages are used. </para>
    <para>You can specify different values for <option>patternType</option> and
      <option>patternPackageType</option>. If a pattern contains unwanted packages, you can use the
      <option>ignore</option> element to specify an ignore list, with the <option>name</option>
     attribute containing the package name. To restrict a package to a specific architecture, use
     the <option>arch</option> attribute to specify a comma separated list of allowed
    architectures.</para>
   </callout>
  </calloutlist>
 </sect2>
 <sect2 id="sec.kiwi.description.config">
  <title>
   <filename>config</filename>
  </title>
  <para>
   <filename>config</filename> is an optional subdirectory that contains shell scripts that are
   executed after all packages are installed. For example, you can include scripts here that remove
   parts of a package that are not needed for the operating system. The name of the bash script must
   resemble the package name listed in the <filename>config.xml</filename> file. </para>
 </sect2>
 <sect2 id="sec.kiwi.description.cdboot">
  <title>
   <filename>cdboot</filename>
  </title>
  <para>
   <filename>cdboot</filename> is an optional directory used to create a bootable CD. This directory
   contains the files required by the isolinux boot loader, including the
   <filename>isolinux.cfg</filename> and <filename>isolinux.msg</filename> configuration files, and
   the <filename>isolinux.sh</filename> build script. The <filename>cdboot</filename> directory
   creates an ISO image from a prebuilt CD tree, based on the configuration information found in the
    <filename>isolinux.cfg</filename> file.</para>
 </sect2>
 <sect2 id="sec.kiwi.description.config.sh">
  <title>
   <filename>config.sh</filename>
  </title>
  <para>
   <filename>config.sh</filename> is an optional configuration script used during the creation of
   the physical extend. This script is executed at the end of the installation after the
    <command>chroot</command> command is used to switch to the operating system image but before the
   package scripts paced in the config directory (see <xref linkend="sec.kiwi.description.config"
    xrefstyle="SectTitleOnPage"/>) are run. This script can be used, for example, to configure the
   image system by activating or deactivating services.</para>
 </sect2>
 <sect2 id="sec.kiwi.description.images.sh">
  <title>
   <filename>images.sh</filename>
  </title>
  <para>
   <filename>images.sh</filename> is an optional configuration script executed at the beginning of
   the image creation process during the creation of the logical extend. This script removes the
   programs and files only needed while the physical extend exists. </para>
 </sect2>
 <sect2 id="sec.kiwi.description.config-yast.xml">
  <title>
   <filename>config-yast.xml</filename>
  </title>
  <para><filename>config-yast.xml</filename> is an optional &ay; configuration file that creates
   a ready-to-use profile (<filename>/root/autoinst.xml</filename>) that can be used to create a
   clone of a particular installation. To generate this file, select <guimenu>Clone This System for
    &ay;</guimenu> during the installation of &product;. To create an autoinstallation file
   from scratch, or to edit an existing autoinstallation file, use the
   <guimenu>Autoinstallation</guimenu> &yast; module.</para>
  <para>To use <filename>/root/autoinst.xml</filename>, copy the file to the image description tree,
   then change the name to <filename>config-yast.xml</filename>. KIWI processes the file and sets up
   your image as follows:</para>
  <itemizedlist mark="bullet" spacing="normal">
   <listitem>
    <para>When the image is booted, &yast; automatically starts in &ay; mode.</para>
   </listitem>
   <listitem>
    <para>&yast; configures the system by applying the rules from
     <filename>config-yast.xml</filename>.</para>
   </listitem>
   <listitem>
    <para>If the process finishes successfully, the environment is cleaned, and &ay; will not be
     started with the next reboot.</para>
   </listitem>
  </itemizedlist>
 </sect2>
 <sect2 id="sec.kiwi.description.config-cdroot.tgz">
  <title>
   <filename>config-cdroot.tgz</filename>
  </title>
  <para>
   <filename>config-cdroot.tgz</filename> is an optional compressed tar archive used only for live
   systems. The data in the archive is uncompressed and stored in the CD/DVD root directory. This
   archive can be used, for example, to integrate a license file or readme information on the CD or
   DVD. </para>
 </sect2>
 <sect2 id="sec.kiwi.description.root">
  <title>
   <filename>root</filename>
  </title>
  <para> The <filename>root</filename> subdirectory contains special files, directories, and scripts
   used to adapt the image environment after the installation of all packages. The entire directory
   is copied into the root of the image tree using the <command>cp <option>-a</option></command>
   command. The data in the <filename>root</filename> directory lets you customize your image with
   data that doesn't exist in the form of a package. </para>
 </sect2>
</sect1>
<!-- Keep this comment at the end of the file
Local variables:
coding:utf-8
mode:xml
sgml-indent-step:1
sgml-omittag:nil
sgml-shorttag:nil
End:
-->
